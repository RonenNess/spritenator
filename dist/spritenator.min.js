!function(){function d(a,b,d){if("DIV"!==a.tagName||"IMG"!==a.children[0].tagName)throw"To create a sprite animator you must provide a <div> element with an <img> as first child! Please read docs for more info and examples.";this.id=c++,this.div=a,this.img=a.children[0],this.sheetSize=b,this.animations=d,this.speed=1,this.paused=!1,this.div.style.overflow="hidden",style=window.getComputedStyle(a),["relative","fixed","absolute"].indexOf(style.getPropertyValue("position"))===-1&&(this.div.style.position="relative"),"auto"===style.getPropertyValue("width")&&(this.div.style.width="128px"),"auto"===style.getPropertyValue("height")&&(this.div.style.height="128px"),this.img.style.position="absolute",this.img.style.width=100*this.sheetSize.x+"%",this.img.style.height=100*this.sheetSize.y+"%",this.img.style.left="0px",this.img.style.top="0px",this.defaultAnimation=null;for(var e in d){this.defaultAnimation=e;break}this.defaultAnimation&&this.play(this.defaultAnimation)}var a=10;setInterval(function(){b.mainLoop(a)},a);var b={version:"1.0.0",sprites:{},mainLoop:function(a){for(id in this.sprites)this.sprites[id].step(a)},animation:function(a){var b={};b.steps=a.steps,b.loop=void 0===a.loop||a.loop,a.next&&(b.next=a.next),a.onStart&&(b.onStart=a.onStart),a.onEnd&&(b.onEnd=a.onEnd);var c=a.delays||[],d=1e3/(a.fps||10);b.delays=[];for(var e=0;e<b.steps.length;++e)b.delays.push(d+(c[e]||0));return b.delays[0]+=a.startDelay||0,b.delays[b.delays.length-1]+=a.endDelay||0,b},create:function(a,b,c){var e=new d(a,b,c);return this.sprites[e.id]=e,a.dataset.sprite_animation_id=e.id,e},get:function(a){var b=a.dataset.sprite_animation_id;return this.sprites[b]}},c=0;d.prototype={play:function(a,b,c){var d=b||(this._curr||{}).name!==a;if(this._curr=this.animations[a],!this._curr)throw"Animation '"+a+"' is undefined!";return this._forceNext=c,d&&this.reset(),this},reset:function(a){return this._stepIndex=0,a||(this._timeInStep=0),this._reachedEnd=!1,this._lastStepIndex=-1,this._curr.onStart&&this._curr.onStart(),this._updateSpritePos(),this},step:function(a){if(!this.paused&&!this._reachedEnd){this._timeInStep+=a*this.speed;var b=this._curr.delays[this._stepIndex];if(this._timeInStep>=b&&(this._stepIndex+=1,this._timeInStep-=b,this._stepIndex>=this._curr.steps.length)){this._curr.onEnd&&this._curr.onEnd();var c=this._forceNext||this._curr.next;if(c)return c="function"==typeof c?c(this):c,void this.play(c);if(!this._curr.loop)return void(this._reachedEnd=!0);this.reset(!0)}return this._updateSpritePos(),this}},current:function(){return this._curr.name},destroy:function(){delete b.sprites[this.id]},_updateSpritePos:function(){if(this._lastStepIndex!==this._stepIndex){var a=this._curr.steps[this._stepIndex],b=a%this.sheetSize.x,c=Math.floor(a/this.sheetSize.x);this.img.style.left=-100*b+"%",this.img.style.top=-100*c+"%",this._lastStepIndex=this._stepIndex}}},window.Spritenator=b}();